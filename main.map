#include <stdio.h>
#include <stdlib.h>
#include <SDL/SDL.h>
#include <SDL/SDL_image.h>
#include <SDL/SDL_mixer.h>
#include <SDL/SDL_ttf.h>
#include "header.h"

int main(void)
{
minimap m;
Personne p;

SDL_Surface *screen = NULL;
SDL_Rect position_camera;

screen = SDL_SetVideoMode(1600, 800, 32, SDL_SWSURFACE | SDL_DOUBLEBUF);
int longueurM = 8000, largeurM = 800, longueur = 800, largeur = 80;
int redimensionnement =  distance * longueur / longueurM; ///constante (globale) à fixer dans un fichier .h commun à part

int continuer = 1;


intit_input(&input);
initmap(&m);

while (continuer)
    {
        afficherminimap(m, screen);
        
        input = getinput(&continuer);
        maj_camera_perso(input, &position_perso,&position_camera); // simulation à enlever dans l'intégration
        majminimap(position_perso, position_camera, &m,,redimensionnement);
        
   /*if (SDL_PollEvent(&event)) //a migrer dans getinput
        {
            switch (event.type)
            {
            case SDL_QUIT:
                continuer = 0;
                break;
            case SDL_KEYDOWN:
                switch (event.key.keysym.sym)
                {
                case SDLK_ESCAPE:
                    continuer = 0;
                    break;
                case SDLK_RIGHT:
                    input.clavier.right = 1;
                    
                    
                    
                    position_camera.x=0; // à migrer dans maj()
                    majminimap(&p,&m,position_camera,redimensionnement);
                    break;
                case SDLK_LEFT:
                    position_camera.x=1;
                    majminimap(&p,&m,position_camera,redimensionnement);
                break;
                case SDLK_DOWN:
                    position_camera.x=2;
                    majminimap(&p,&m,position_camera,redimensionnement);
                    break;
                case SDLK_UP:
                    position_camera.x=3;
                    majminimap(&p,&m,position_camera,redimensionnement);
                    break;
                }
            }
        }
        
        */
        SDL_Flip(screen);
    }
    SDL_Quit();
    return EXIT_SUCCESS;
}
